# OpenSpec

## 1. 项目概述
OGMS 出国监督管理系统是一个前端单页应用（SPA），面向外事出访全流程的评估、申报、归国报告、成果撮合与合规审计。当前代码实现以页面展示与交互原型为主，包含大量 AI 智能体浮窗与可视化看板。

## 2. 背景与目标
- 背景：外事出访业务涉及多角色协同与强合规监管，传统流程存在材料分散、审核效率低、风险识别滞后等问题。
- 目标：
  - 提供全流程统一入口与可视化业务看板。
  - 利用 AI 提升评估、审核、写作与风险识别效率。
  - 聚合成果转化与撮合能力，形成闭环追踪。
  - 统一合规校验与审计追溯视图。
- 非目标：
  - 不提供后端业务系统与真实持久化能力。
  - 不实现完整的 RBAC 鉴权链路与审计留痕。
  - 不落地真实对接财政、签证、签章等外部系统。
  - 不提供自动化测试与监控体系。

## 3. 用户与角色
- 外事办/审批人员：审核、复核、签章、合规检查。
- 业务单位申报员：任务申报、变更填报、材料提交。
- 招商/经信部门：成果报告、企业画像、撮合管理。
- 系统管理员：用户、API、平台治理配置。
- 审计与合规人员：风险预警、日志追溯、涉密识别。

## 4. 产品范围
- 功能模块：
  - 出访评估：安全/政治、人文经济、邀请方评估。
  - 申报预审：政策解读、审核助手、任务变更、申诉复核。
  - 归国报告：招商/局级/企事业三类报告处理。
  - 成果社区：分类、模板、发布、推荐、语义检索、积分体系。
  - 成果撮合：需求申请、契合评估、结果管理、进度追踪。
  - 合规管理：预算、规则、人数、行程、活动、涉密识别。
  - 监管审计：统计分析、流程追踪、格式校验、冲突检测。
  - 协同模块：财政同步、签证同步、群组讨论。
  - 电子签章：合同签章、审批签章、权限管理、过程存证。
  - 平台治理：服务状态、鉴权、数据治理、日志分析、配置管理。
- 不在范围：
  - 真实审批流、财务结算、签证或签章业务处理。
  - 服务端 API、数据库建模、缓存与消息队列实现。
  - 生产级安全策略与合规模型部署。

## 5. 系统上下文
- 技术栈：React 19 + TypeScript + Vite；路由 HashRouter；样式 Tailwind CDN；可视化 Recharts；AI 使用 Google Gemini。
- 运行与部署：`npm run dev`（3000）；`npm run build`；Nginx 静态部署（Docker 多阶段构建）。

## 6. 关键页面与路由
- 概览：`/dashboard`
- 评估：`/eval-env`、`/eval-culture`、`/eval-inviter`
- 申报：`/policy-interpretation`、`/review-assistant`、`/daily-update`、`/appeal-review`
- 报告：`/reports/*`
- 成果：`/achievement-cockpit`、`/community/*`
- 撮合：`/matching/*`
- 合规：`/compliance/*`
- 监管：`/insp-*`
- 上传：`/upload/*`
- 协同：`/collaboration/*`
- 签章：`/signature/*`
- 管理：`/admin/*`
- 帮助：`/help`

## 7. AI 能力说明
- 模型：`gemini-3-flash-preview`
- 服务封装：`services/geminiService.ts`
- 多数页面直接调用 `GoogleGenAI` 并返回文本
- 部分能力使用 JSON schema 约束输出结构
- 智能体以右下角浮窗形式嵌入各模块

## 8. 数据与状态
- 数据模型：`RiskAssessment`、`Achievement`、`User`
- 状态管理：登录态存于 `localStorage`（`ogms_auth`），页面内为 `useState` 与 mock 数据

## 9. 安全与合规
- `GEMINI_API_KEY` 注入客户端，存在泄露风险。
- UI 展示 CA、区块链、MFA 等能力，但无真实后端实现。
- `metadata.json` 申请摄像头/麦克风权限，未见实际调用。

## 10. 运维与观测
暂无前端埋点、错误上报与性能监控实现，监控与审计仅为界面展示。

## 11. 已知缺口
- 文档引用 `list.txt`、`frontend_architecture.md`、`ai_agent_integration.md` 不存在。
- `index.html` 引用了 `/index.css`，项目内未发现该文件。
- 部分页面未接入路由或存在冗余文件（如已拆分的旧页面）。
